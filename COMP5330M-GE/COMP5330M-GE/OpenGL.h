#pragma once
#include "Platform.h"
#include <gl/GL.h>
#include "wglext.h"
#include "glext.h"

//List of gl functions that we need
//WARNING: Please don't touch without talking to Isaac first
#define GL_REQUIRED_FUNCTIONS_LIST \
GL_FUNCTION(PFNGLUSEPROGRAMPROC, glUseProgram) \
GL_FUNCTION(PFNGLSHADERSOURCEPROC, glShaderSource) \
GL_FUNCTION(PFNGLCREATESHADERPROC, glCreateShader) \
GL_FUNCTION(PFNGLCOMPILESHADERPROC, glCompileShader) \
GL_FUNCTION(PFNGLGETSHADERIVPROC, glGetShaderiv) \
GL_FUNCTION(PFNGLCREATEPROGRAMPROC, glCreateProgram) \
GL_FUNCTION(PFNGLLINKPROGRAMPROC, glLinkProgram) \
GL_FUNCTION(PFNGLGETPROGRAMIVPROC, glGetProgramiv) \
GL_FUNCTION(PFNGLATTACHSHADERPROC, glAttachShader) \
GL_FUNCTION(PFNGLDELETESHADERPROC, glDeleteShader) \
GL_FUNCTION(PFNGLGENBUFFERSPROC, glGenBuffers) \
GL_FUNCTION(PFNGLDELETEBUFFERSPROC, glDeleteBuffers) \
GL_FUNCTION(PFNGLBINDBUFFERPROC, glBindBuffer) \
GL_FUNCTION(PFNGLBUFFERDATAPROC, glBufferData) \
GL_FUNCTION(PFNGLGENVERTEXARRAYSPROC, glGenVertexArrays) \
GL_FUNCTION(PFNGLDELETEVERTEXARRAYSPROC, glDeleteVertexArrays) \
GL_FUNCTION(PFNGLBINDVERTEXARRAYPROC, glBindVertexArray) \
GL_FUNCTION(PFNGLVERTEXATTRIBPOINTERPROC, glVertexAttribPointer) \
GL_FUNCTION(PFNGLENABLEVERTEXATTRIBARRAYPROC, glEnableVertexAttribArray) \
GL_FUNCTION(PFNGLGETSHADERINFOLOGPROC, glGetShaderInfoLog)\
GL_FUNCTION(PFNGLGETUNIFORMLOCATIONPROC, glGetUniformLocation) \
GL_FUNCTION(PFNGLUNIFORMMATRIX4FVPROC, glUniformMatrix4fv) \
GL_FUNCTION(PFNGLBLENDEQUATIONPROC, glBlendEquation) \
GL_FUNCTION(PFNGLUNIFORM1IPROC, glUniform1i) \
GL_FUNCTION(PFNGLBINDSAMPLERPROC, glBindSampler) \
GL_FUNCTION(PFNGLACTIVETEXTUREPROC, glActiveTexture) \
GL_FUNCTION(PFNGLDRAWELEMENTSBASEVERTEXPROC, glDrawElementsBaseVertex) \
GL_FUNCTION(PFNGLBLENDEQUATIONSEPARATEPROC, glBlendEquationSeparate) \
GL_FUNCTION(PFNGLBLENDFUNCSEPARATEPROC, glBlendFuncSeparate) \
GL_FUNCTION(PFNGLGETPROGRAMINFOLOGPROC, glGetProgramInfoLog) \
GL_FUNCTION(PFNGLGETATTRIBLOCATIONPROC, glGetAttribLocation) \
GL_FUNCTION(PFNGLDETACHSHADERPROC, glDetachShader) \
GL_FUNCTION(PFNGLDELETEPROGRAMPROC, glDeleteProgram)

#define GL_FUNCTION(FUNCTION_TYPE, FUNCTION_NAME) extern FUNCTION_TYPE FUNCTION_NAME;
GL_REQUIRED_FUNCTIONS_LIST
#undef GL_FUNCTION

GLuint create_shader_program(char* vertex_shader_src, char* fragment_shader_src);

//Sets up opengl and returns whether initialisation was successful
bool initialise_opengl(HWND window);